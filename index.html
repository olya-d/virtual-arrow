<!DOCTYPE html>
<html lang="en">
<head>
        <title>virtual-arrow</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="theme/css/main.css" type="text/css" />
        <link rel="stylesheet" href="theme/css/pygment.css" type="text/css" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie.css"/>
                <script src="/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="">virtual-arrow </a></h1>
                <nav>
                    <a href="/pages/user-guide.html">User Guide</a>&nbsp;
                </nav>
        </header><!-- /#banner -->
        
<section id="content" class="body">    
            <div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id7">Introduction</a></li>
<li><a class="reference internal" href="#supported-electoral-systems" id="id8">Supported electoral systems</a></li>
<li><a class="reference internal" href="#expected-input-format" id="id9">Expected input format</a></li>
<li><a class="reference internal" href="#example-of-usage" id="id10">Example of usage</a></li>
<li><a class="reference internal" href="#information-on-electoral-systems" id="id11">Information on electoral systems</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id7">Introduction</a></h2>
<p>This program written in Haskell computes the resulting parliament based on several electoral systems for constituencies and voters supplied by the user.</p>
<p>The program was inspired by <a class="reference external" href="http://jasss.soc.surrey.ac.uk/7/3/3.html">ALEX3: a Simulation Program to Compare Electoral Systems</a>.</p>
</div>
<div class="section" id="supported-electoral-systems">
<h2><a class="toc-backref" href="#id8">Supported electoral systems</a></h2>
<ol class="arabic simple">
<li><a class="reference internal" href="#the-borda-count">The Borda Count</a></li>
<li><a class="reference internal" href="#one-district-proportionality">One-district proportionality</a></li>
<li><a class="reference internal" href="#plurality">Plurality</a></li>
<li><a class="reference internal" href="#run-off-plurality">Run-off plurality</a></li>
<li><a class="reference internal" href="#multi-district-proportionality">Multi-district proportionality</a></li>
<li><a class="reference internal" href="#mixed-member-1">Mixed-member 1</a></li>
<li><a class="reference internal" href="#mixed-member-2">Mixed-member 2</a></li>
<li><a class="reference internal" href="#threshold-proportionality">Threshold proportionality</a></li>
<li><a class="reference internal" href="#single-transferable-vote">Single Transferable Vote</a></li>
</ol>
</div>
<div class="section" id="expected-input-format">
<h2><a class="toc-backref" href="#id9">Expected input format</a></h2>
<p>To compute the resulting parliament, the program requires at least three parameters: information about constituencies (districts), information about voters and their preferences and the number of parties.</p>
<p>Information about districts and voters should be supplied as CSV files. See the example:</p>
<p><em>districs.csv</em></p>
<div class="highlight"><pre><span class="n">districtID</span><span class="p">,</span><span class="n">nseats</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">4</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">2</span>
</pre></div>
<p><em>voters.csv</em></p>
<div class="highlight"><pre><span class="n">size</span><span class="p">,</span><span class="n">district</span><span class="p">,</span><span class="n">preferences</span>
<span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span>
</pre></div>
<p>Here we have two districts, 1 and 2, with 4 and 2 seats in the parliament respectively. We also have 8 voters, divided into three groups (column <em>size</em> says how many voters with these characteristics there are). Voters are divided into groups, as they naturally can be in real circumstances, since it can significantly decrease the size of the file.</p>
<p>Additional file is required for Single Transferable Vote:</p>
<p><em>candidates.csv</em></p>
<div class="highlight"><pre><span class="n">candidateID</span><span class="p">,</span><span class="n">party</span>
<span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">2</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">1</span>
</pre></div>
<p>Single Transferable Vote asks voters to rank candidates, not parties, but each candidate belongs to one. So it is required to know the relationship between candidates and their parties. If we look at the <em>voters.csv</em> and <em>candidates.csv</em>, they say that voters from the first group prefer the most candidate number 1 from the party number 2.</p>
<p>To compute the index of governability it is necessary to know coalitions, which should be provided in the following format:</p>
<p><em>coalitions.csv</em></p>
<div class="highlight"><pre><span class="n">party</span><span class="p">,</span><span class="n">coalition</span>
<span class="mi">0</span><span class="p">,</span><span class="mi">1</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">0</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">1</span>
</pre></div>
<p>In this example parties number 0 and 2 belong to one coalition.</p>
</div>
<div class="section" id="example-of-usage">
<h2><a class="toc-backref" href="#id10">Example of usage</a></h2>
<p>The program is supplied with one (somewhat <a class="footnote-reference" href="#id4" id="id1">[1]</a>) real-world example: the 2015 election in the United Kingdom parliament.</p>
<p>The sciprt <cite>main.py</cite> generates <cite>voters.csv</cite> <a class="footnote-reference" href="#id5" id="id2">[2]</a> and <cite>constituencies.csv</cite>. To see the result of election if one-district proportionality is used (instead of current 'First-past-the-post' system, in our case called 'Plurality'), the program should be started from the command line:</p>
<div class="highlight"><pre>.virtual-arrow result --system one-district -d example/constituencies.csv -v example/voters.csv -p 5
</pre></div>
<p>Here we provide the name of the system (<cite>one-district</cite>), path to CSV with districts (<cite>example/constituencies.csv</cite>), path to CSV with voters (<cite>example/voters.csv</cite>) and the number of parties (<cite>5</cite>).</p>
<p>The program produces the following output:</p>
<div class="highlight"><pre><span class="n">party</span><span class="p">,</span><span class="n">number_of_seats</span>
<span class="mi">0</span><span class="p">,</span><span class="mi">170</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">76</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">220</span>
<span class="mi">3</span><span class="p">,</span><span class="mi">44</span>
<span class="mi">4</span><span class="p">,</span><span class="mi">23</span>
</pre></div>
<p>Which gives the structure of the elected parliament (the Labour Party has 170 seats, the United Kingdom Independent Party has 76 seats, and so on).</p>
<p>This output (if saved as <cite>one-district.csv</cite>) can be further used as an input for calculating the index of representativeness according to <a class="reference external" href="http://en.wikipedia.org/wiki/Gallagher_Index">Gallagher</a>:</p>
<div class="highlight"><pre>./virtual-arrow gallagher -r one-district.csv -d example/constituencies.csv -v example/voters.csv -p 5
</pre></div>
<p>And the output is</p>
<div class="highlight"><pre>0.0
</pre></div>
<p>as expected for absolutely proportional electorate system. Then if we try <cite>plurality</cite>:</p>
<div class="highlight"><pre><span class="nv">$ </span>./virtual-arrow result --system plurality -d example/constituencies.csv -v example/voters.csv -p <span class="m">5</span> &gt;&gt; plurality.csv

<span class="nv">$ </span>./virtual-arrow gallagher -r plurality.csv -d example/constituencies.csv -v example/voters.csv -p 5

&gt; 18.117455830983083
</pre></div>
<p>and <cite>borda-count</cite>:</p>
<div class="highlight"><pre><span class="nv">$ </span>./virtual-arrow gallagher -r borda.csv -d example/constituencies.csv -v example/voters.csv -p 5
&gt; 14.771806468611409
</pre></div>
<p>We see that representativeness increases in case of the <cite>Borda count</cite>, the result that can be further improved in case of <cite>run-off plurality</cite>:</p>
<div class="highlight"><pre><span class="nv">$ </span>./virtual-arrow gallagher -r run-off.csv -d example/constituencies.csv -v example/voters.csv -p 5
&gt; 11.541130581035421
</pre></div>
<p>Increase in the representativeness can lead to more fragmented parliament. Under <cite>plurality</cite> the Conservative party has a clear majority, and under <cite>run-off plurality</cite> it has to govern in coalition with the Liberal Democrat Party <a class="footnote-reference" href="#id6" id="id3">[3]</a>. Hence, the governability index decreases:</p>
<div class="highlight"><pre><span class="nv">$ </span>./virtual-arrow governability -r plurality.csv -c coalitions.csv
&gt; 0.6097560975609756
<span class="nv">$ </span>./virtual-arrow governability -r run-off.csv -c coalitions.csv
&gt; 0.3430268918073796
</pre></div>
<p>To see the complete description of available commands and their arguments, run:</p>
<div class="highlight"><pre><span class="nv">$ </span>./virtual-arrow --help
<span class="nv">$ </span>./virtual-arrow result
</pre></div>
</div>
<div class="section" id="information-on-electoral-systems">
<h2><a class="toc-backref" href="#id11">Information on electoral systems</a></h2>
<div class="section" id="the-borda-count">
<h3>The Borda Count</h3>
<p>Each voter ranks all parties from <span class="formula">0</span> to <span class="formula"><i>n</i> − 1</span>, where <span class="formula"><i>n</i></span> is the number of parties. For each vote cast a party gets a number of points: <span class="formula">0</span> if it is on the first place in the ballot, <span class="formula">1</span> if on the second and so on till <span class="formula"><i>n</i> − 1</span> points. For each district a winner is determined as a party with the least number of points. All seats are assigned to the winner.</p>
</div>
<div class="section" id="one-district-proportionality">
<h3>One-district proportionality</h3>
<p>Districts are aggregated into one and seats are assigned proportionally.</p>
</div>
<div class="section" id="plurality">
<h3>Plurality</h3>
<p>Voters choose one party, the party with the most votes wins in each district.</p>
</div>
<div class="section" id="run-off-plurality">
<h3>Run-off plurality</h3>
<p>The same as <a class="reference internal" href="#plurality">Plurality</a>, but if no party gains at least <span class="formula">50</span> % of the votes, the second round is arranged with the two parties with the most votes. The one with the most votes in the second round wins.</p>
</div>
<div class="section" id="multi-district-proportionality">
<h3>Multi-district proportionality</h3>
<p>In each district seats are allocated using <a class="reference external" href="http://en.wikipedia.org/wiki/Sainte-Lagu%C3%AB_method">Sainte-Laguë method</a>: successive quotients are calculated for each party, whichever party has the highest quotient gets the next seat allocated. The process is repeated until all seats have been allocated.</p>
</div>
<div class="section" id="mixed-member-1">
<h3>Mixed-member 1</h3>
<p>One parliament is elected with the <a class="reference internal" href="#plurality">Plurality</a>, and one using <a class="reference internal" href="#multi-district-proportionality">Multi-district proportionality</a>. The resulting parliament is a weighted mean of the two. The weight of the first parliament relative to the second one is specified by the user.</p>
</div>
<div class="section" id="mixed-member-2">
<h3>Mixed-member 2</h3>
<p>Part of parliament is elected with the <a class="reference internal" href="#plurality">Plurality</a>, and the remainder is elected using the <a class="reference internal" href="#multi-district-proportionality">Multi-district proportionality</a>. Share of seats to be elected with the Plurality System is specified by the user.</p>
</div>
<div class="section" id="threshold-proportionality">
<h3>Threshold proportionality</h3>
<p>The same as <a class="reference internal" href="#one-district-proportionality">One-district proportionality</a>, but parties have to gain the specified percentage of votes. Parties that do not meet this criteria are discarded and the seats are distributed proportionally between the remaining parties.</p>
</div>
<div class="section" id="single-transferable-vote">
<h3>Single Transferable Vote</h3>
<p>The seats for each candidate, in each district, are assigned according to a quota (<a class="reference external" href="http://en.wikipedia.org/wiki/Droop_quota">Droop quota</a>). A candidate that reaches the quota is declared elected. If a candidate has more votes than the quota, surplus votes are transferred to the candidates chosen as the next preference. If no-one new meets the quota, the candidate with fewest votes is eliminated and those votes are transferred. This process repeats until either a winner is found for every seat or there are as many seats as remaining candidates.</p>
<p>Single Transferable Vote is used with the list of candidates, thus the additional parameter (each candidate's party membership) is required to determine the number of seats for each party.</p>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>In the UK example only constituencies located in England are taken into account as I do not have enough data to predict the second and further orders of preferences for voters in Scotland, Wales and Northern Ireland. Thus regional parties, such as Scottish National Party, Democratic Unionist Party, Sinn Fein and so on, are not considered.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>As can be seen from <cite>main.py</cite>, parties are given the following identifiers:</td></tr>
</tbody>
</table>
<div class="highlight"><pre><span class="s1">&#39;Labour&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="s1">&#39;UKIP&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="s1">&#39;Conservative&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="s1">&#39;Liberal Democrat&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="s1">&#39;Green Party&#39;</span><span class="p">:</span> <span class="mi">4</span>
</pre></div>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td>Assumption is made (based on public announcements) that the Conservative party is in a coalition with the Liberal Democrat Party and the Labour party is in a coalition with the Green Party.</td></tr>
</tbody>
</table>
</div>
</div>

</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                     Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>. Theme is using <a href="http://github.com/getpelican/pelican-themes" target="_blank">cebong</a>.
                </address><!-- /#about -->

        </footer><!-- /#contentinfo -->

</body>
</html>