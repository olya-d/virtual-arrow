<!DOCTYPE html>
<html lang="en">
<head>
        <title>virtual-arrow</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
        <link rel="stylesheet" href="/theme/css/pygment.css" type="text/css" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie.css"/>
                <script src="/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="">virtual-arrow </a></h1>
                <nav>
                    <a href="/pages/user-guide.html">User Guide</a>&nbsp;
                </nav>
        </header><!-- /#banner -->
        
<section id="content" class="body">    
            <p>This program written in Haskell computes the resulting parliament based on several electoral systems for constituencies and voters supplied by the user.</p>
<p>The program was inspired by <a class="reference external" href="http://jasss.soc.surrey.ac.uk/7/3/3.html">ALEX3: a Simulation Program to Compare Electoral Systems</a>.</p>
<div class="section" id="supported-electoral-systems">
<h2>Supported electoral systems</h2>
<ol class="arabic simple">
<li>The Borda Count</li>
<li>One-district proportionality</li>
<li>Plurality</li>
<li>Run-off plurality</li>
<li>Multi-district proportionality</li>
<li>Mixed-member 1</li>
<li>Mixed-member 2</li>
<li>Threshold proportionality</li>
<li>Single Transferable Vote</li>
</ol>
</div>
<div class="section" id="expected-input-format">
<h2>Expected input format</h2>
<p>To compute the resulting parliament, the program requires at least three parameters: information about constituencies (districts), information about voters and their preferences and the number of parties.</p>
<p>Information about districts and voters should be supplied as CSV files. See the example:</p>
<p><em>districs.csv</em></p>
<div class="highlight"><pre><span class="n">districtID</span><span class="p">,</span><span class="n">nseats</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">4</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">2</span>
</pre></div>
<p><em>voters.csv</em></p>
<div class="highlight"><pre><span class="n">size</span><span class="p">,</span><span class="n">district</span><span class="p">,</span><span class="n">preferences</span>
<span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span>
</pre></div>
<p>Here we have two districts, 1 and 2, with 4 and 2 seats in the parliament respectively. We also have 8 voters, divided into three groups (column <em>size</em> says how many voters with these characteristics there are). Voters are divided into groups, as they naturally can be in real circumstances, since it can significantly decrease the size of the file.</p>
<p>Additional file is required for Single Transferable Vote:</p>
<p><em>candidates.csv</em></p>
<div class="highlight"><pre><span class="n">candidateID</span><span class="p">,</span><span class="n">party</span>
<span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">2</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">1</span>
</pre></div>
<p>Single Transferable Vote asks voters to rank candidates, not parties, but each candidate belongs to one. So it is required to know the relationship between candidates and their parties. If we look at the <em>voters.csv</em> and <em>candidates.csv</em>, they say that voters from the first group prefer the most candidate number 1 from the party number 2.</p>
</div>
<div class="section" id="example-of-usage">
<h2>Example of usage</h2>
<p>The program is supplied with one (somewhat <a class="footnote-reference" href="#id3" id="id1">[1]</a>) real-world example: the 2015 election in the United Kingdom parliament.</p>
<p>The sciprt <cite>main.py</cite> generates <cite>voters.csv</cite> <a class="footnote-reference" href="#id4" id="id2">[2]</a> and <cite>constituencies.csv</cite>. To see the result of election if one-district proportionality is used (instead of current 'First-past-the-post' system, in our case called 'Plurality'), the program should be started from the command line:</p>
<div class="highlight"><pre>.virtual-arrow result --system one-district -d example/constituencies.csv -v example/voters.csv -p 5
</pre></div>
<p>Here we provide the name of the system (<cite>one-district</cite>), path to CSV with districts (<cite>example/constituencies.csv</cite>), path to CSV with voters (<cite>example/voters.csv</cite>) and the number of parties (<cite>5</cite>).</p>
<p>The program produces the following output:</p>
<div class="highlight"><pre><span class="n">party</span><span class="p">,</span><span class="n">number_of_seats</span>
<span class="mi">0</span><span class="p">,</span><span class="mi">170</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">76</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">220</span>
<span class="mi">3</span><span class="p">,</span><span class="mi">44</span>
<span class="mi">4</span><span class="p">,</span><span class="mi">23</span>
</pre></div>
<p>Which gives the structure of the elected parliament (the Labour Party has 170 seats, the United Kingdom Independent Party has 76 seats, and so on).</p>
<p>This output (if saved as <cite>one-district.csv</cite>) can be further used as an input for calculating the index of representaviness according to <a class="reference external" href="http://en.wikipedia.org/wiki/Gallagher_Index">Gallagher</a>:</p>
<div class="highlight"><pre>./virtual-arrow gallagher -r one-district.csv -d example/constituencies.csv -v example/voters.csv -p 5
</pre></div>
<p>And the output is</p>
<div class="highlight"><pre>0.0
</pre></div>
<p>as expected for absolutely proportional electorate system. Then if we try <cite>plurality</cite>:</p>
<div class="highlight"><pre><span class="nv">$ </span>./virtual-arrow result --system plurality -d example/constituencies.csv -v example/voters.csv -p <span class="m">5</span> &gt;&gt; plurality.csv

<span class="nv">$ </span>./virtual-arrow gallagher -r plurality.csv -d example/constituencies.csv -v example/voters.csv -p 5

&gt; 18.117455830983083
</pre></div>
<p>and <cite>borda-count</cite>:</p>
<div class="highlight"><pre><span class="nv">$ </span>./virtual-arrow gallagher -r borda.csv -d example/constituencies.csv -v example/voters.csv -p 5
&gt; 14.771806468611409
</pre></div>
<p>We see that representaviness increases in case of the Borda Count.</p>
<p>To see the complete description of available commands and their arguments, run:</p>
<div class="highlight"><pre><span class="nv">$ </span>./virtual-arrow --help
<span class="nv">$ </span>./virtual-arrow result --help
</pre></div>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>In the UK example only constituencies located in England are taken into account as I do not have enough data to predict the second and further orders of preferences for voters in Scotland, Wales and Nothern Ireland. Thus regional parties, such as Scottish National Party, Democratic Unionist Party, Sinn Fein and so on, are not considered.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>As can be seen from <cite>main.py</cite>, parties are given the following identifiers:</td></tr>
</tbody>
</table>
<div class="highlight"><pre><span class="s1">&#39;Labour&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="s1">&#39;UKIP&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="s1">&#39;Conservative&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="s1">&#39;Liberal Democrat&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="s1">&#39;Green Party&#39;</span><span class="p">:</span> <span class="mi">4</span>
</pre></div>
</div>

</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                     Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>. Theme is using <a href="http://github.com/getpelican/pelican-themes" target="_blank">cebong</a>.
                </address><!-- /#about -->

        </footer><!-- /#contentinfo -->

</body>
</html>